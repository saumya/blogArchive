<!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" lang="en-US">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US">
<!--<![endif]-->
<head>
<base href="http://saumya.github.io/blogArchive" />

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>Lua : some basics | saumya</title>

<link rel="stylesheet" type="text/css" media="all" href="http://saumya.github.io/blogArchive/wp-content/themes/twentyeleven/style.css" />

<!--[if lt IE 9]>
<script src="http://saumya.github.io/blogArchive/wp-content/themes/twentyeleven/js/html5.js" type="text/javascript"></script>
<![endif]-->



<script type='text/javascript' src='http://saumya.github.io/blogArchive/wp-includes/js/comment-reply.min.js?ver=3.5'></script>

 

<link rel='next' title='Sparrow V1.2 is released' href='http://saumya.github.io/blogArchive/archives/402' />

<link rel='canonical' href='http://saumya.github.io/blogArchive/archives/369' />
<link rel='shortlink' href='http://saumya.github.io/blogArchive/?p=369' />
<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #e2e2e2; }
</style>
</head>

<body class="single single-post postid-369 single-format-standard custom-background singular two-column right-sidebar">
<div id="page" class="hfeed">
	<header id="branding" role="banner">
			<hgroup>
				<h1 id="site-title"><span><a href="http://saumya.github.io/blogArchive/" title="saumya" rel="home">saumya</a></span></h1>
				<h2 id="site-description">Where there is a will, there is a way.</h2>
			</hgroup>

						<a href="http://saumya.github.io/blogArchive/">
									<img src="http://saumya.github.io/blogArchive/wp-content/uploads/2011/08/sanchi.jpg" width="1000" height="288" alt="" />
							</a>
			

			<nav id="access" role="navigation">
				<h3 class="assistive-text">Main menu</h3>
								<div class="skip-link"><a class="assistive-text" href="#content" title="Skip to primary content">Skip to primary content</a></div>
				<div class="skip-link"><a class="assistive-text" href="#secondary" title="Skip to secondary content">Skip to secondary content</a></div>
								<div class="menu"><ul><li ><a href="http://saumya.github.io/blogArchive/" title="Home">Home</a></li></ul></div>
			</nav><!-- #access -->
	</header><!-- #branding -->


	<div id="main">

		<div id="primary">
			<div id="content" role="main">

				
					<nav id="nav-single">
						<h3 class="assistive-text">Post navigation</h3>
						<span class="nav-previous"><a href="http://saumya.github.io/blogArchive/archives/367" rel="prev"><span class="meta-nav">&larr;</span> Previous</a></span>
						<span class="nav-next"><a href="http://saumya.github.io/blogArchive/archives/402" rel="next">Next <span class="meta-nav">&rarr;</span></a></span>
					</nav><!-- #nav-single -->

					
<article id="post-369" class="post-369 post type-post status-publish format-standard hentry category-opensource category-saumya category-tutorial tag-development tag-framework tag-lua tag-open-source tag-opensource">
	<header class="entry-header">
		<h1 class="entry-title">Lua : some basics</h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="http://saumya.github.io/blogArchive/archives/369" title="1:06 am" rel="bookmark"><time class="entry-date" datetime="2011-05-25T01:06:00+00:00">May 25, 2011</time></a><span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://saumya.github.io/blogArchive/archives/author/saumya" title="View all posts by saumya" rel="author">saumya</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>This is an <a href="http://www.saumyaray.com/saumya/archives/357">extension of my last post about Lua</a>. If you have not read that yet, I strongly suggest start from there as a beginner of Lua. On the other hand, if you know the basics of Lua, this post is exactly for you.<br />
Hope you enjoy Lua as I am excited about it. Lets get started.<br />
Commenting in Lua is done by &#8220;&#8211;&#8221; for single line and with &#8220;&#8211;[[ ]]&#8221; for multiline.</p>
<pre lang="lua">-- single line comment
--[[
Multiline comment is
Like this.
]]
print("comments are done, get back to work")</pre>
<p><span id="more-369"></span>Lua code can be decided into specific modules. If we want to put all of a similar kind of functionality into one .lua file then we can call that file as a Lua module. Suppose we make a file named &#8220;package2com.lua&#8221; to store some kind of similar functionalities and store the file inside a folder named &#8220;com&#8221; . Now we need to call this new module (which we recently created &#8220;package2com&#8221;) inside our main Lua class, then the code inside main.lua will look as below</p>
<pre lang="lua"> require("com.package2com") </pre>
<p>Just remember that, while using &#8220;require&#8221;, the module name does not include &#8220;.lua&#8221; in it.<br />
Now writing a module is as simple as the below declaration in the beginning of the module file.</p>
<pre lang="lua">module(...,package.seeall)</pre>
<p>And then defining the variables and functions after that.<br />
There are some functions in Lua that take &#8220;self&#8221; as the first parameter. We can also write functions which take &#8220;self&#8221; as first parameter.</p>
<pre lang="lua">function trace(self,message)
print('self parameter')
end</pre>
<p>Calling a module function is as simple as using a . (dot) after module name and then putting the function name. If we want to call a function present in our &#8220;package2com&#8221; module, the code will look as</p>
<pre lang="lua">com.package2com.myfunction()</pre>
<p>The exception is to call functions which take &#8220;self&#8221; as first parameter. There the call will happen through &#8220;:&#8221; not &#8220;.&#8221; , the example code is</p>
<pre lang="lua">com.package2com:mySelfFunction()</pre>
<p>If the function takes &#8220;self&#8221; as first parameter, we need not pass self from the point we are calling the function, rather call is made with &#8220;:&#8221; and Lua takes care of the rest.<br />
Local functions are not available outside that module.<br />
Defining more than one variables is, possible in one declaration as below</p>
<pre lang="lua">local x,y,z=4,"string value",5</pre>
<p>If we do not specify all the values for all the variables, a value of &#8220;nil&#8221; is applied to that variable. Similarly, if more values are provided than the variables, then they are ignored.<br />
Type conversion is automatic in Lua. The code below</p>
<pre lang="lua">print (20+'4')</pre>
<p>will result in 24.<br />
But if we say</p>
<pre lang="lua">print ('string'+4)</pre>
<p>That will throw an error, saying &#8220;attempt to perform arithmetic on a string value&#8221;. That means, the type conversion will be automatic for numeric values wrapped in string.<br />
The string concatenation is done with &#8220;..&#8221; as shown below</p>
<pre lang="lua">print ('4'..'5')</pre>
<p>Lua!!<br />
The final example <a href="http://www.box.net/shared/qgozvmfg3a">codes are attached here for your reference</a>, there are code comments and result comments also, which can be handy to understand some of the concepts described here with more clarity.</p>
<p>main.lua</p>
<pre lang="lua">-- Module study
--Program entry
require("com.package2com");

com.package2com:trace('what');
com.package2com.traceM('what');
-- com.package2com:traceModeIsLocal(); --for its local scoped

print(os.date());
print(os.time());

--[[
 form3.wlua
 require 'CLRPackage'
 import "System.Windows.Forms"
 import "System.Drawing"

 button = Button()
 button.Text = "Click!"
 button.Dock = DockStyle.Top
 edit = RichTextBox()
 edit.Dock = DockStyle.Fill

 form = Form()
 form.Text = "Hello, World!"
 form.Controls:Add(edit)
 form.Controls:Add(button)
 form:ShowDialog()
 ]]

print('Comments are ended!!')

local x,y,z=1,'second variable value',3,4;
print(x,y,z);

local x,y,z=4,5;
print(x,y,z);

print(x+y);
--print(x+y+z);
--[[
Will result in an error like this :
    error: attempt to perform arithmetic on global 'c' ( a nil value)

nil is also the only concept of "false-hood" Lua supports. We've seen this in the upper example. It's also good to remind that nil is false but not equal to 0 in a numeric sense. This was why

    print(a + b + c)

c being a nil "value" will result in a runtime error
]]

print('Thats awesome, Lua.');
print(20+'4');
print('4'+20);
--print('20'+' string');
print ('20'+'4');
print ('20'..'4');--string concatenation
--string study
local s=4;
local t=5;
print('Interesting to see the same variables can produce different results depending upon operators!');
print(s..t); -- concatenation
print(s+t);  -- addition</pre>
<p>package2com.lua (which is inside com folder)</p>
<pre lang="lua">module(...,package.seeall);

local i=5;
local n='what ?';

local function traceModeIsLocal()
	print('---------------Local Mode-------------------');
end

--variables and methods must be defined before they are called

function trace(self,message)
	print('-------------GLOBAL---------------------');
	print('---- Called with : not . -----');
	print(_VERSION);
	print(message);
	print(i);
	print(n);
	traceModeIsLocal();
	print('When self is the first parameter, the functions are called with a : ');
	print('----------------------------------');

end

function traceM(message)
	print('-------------GLOBAL---------------------');
	print('---- Called with . not : -----');
	print(_VERSION);
	print(message);
	traceModeIsLocal();
	print('----------------------------------');
end</pre>
<p>Thats all to it, we can now start building our modular Lua applications.</p>
<p><span class="post_sig">Posted from WordPress for Android through my &#8220;HTC Wildfire&#8221;.</span></p>
			</div><!-- .entry-content -->

	<footer class="entry-meta">
		This entry was posted in <a href="http://saumya.github.io/blogArchive/archives/category/opensource" title="View all posts in opensource" rel="category tag">opensource</a>, <a href="http://saumya.github.io/blogArchive/archives/category/saumya" title="View all posts in saumya" rel="category tag">saumya</a>, <a href="http://saumya.github.io/blogArchive/archives/category/tutorial" title="View all posts in tutorial" rel="category tag">tutorial</a> and tagged <a href="http://saumya.github.io/blogArchive/archives/tag/development" rel="tag">development</a>, <a href="http://saumya.github.io/blogArchive/archives/tag/framework" rel="tag">framework</a>, <a href="http://saumya.github.io/blogArchive/archives/tag/lua" rel="tag">lua</a>, <a href="http://saumya.github.io/blogArchive/archives/tag/open-source" rel="tag">open source</a>, <a href="http://saumya.github.io/blogArchive/archives/tag/opensource" rel="tag">opensource</a> by <a href="http://saumya.github.io/blogArchive/archives/author/saumya">saumya</a>. Bookmark the <a href="http://saumya.github.io/blogArchive/archives/369" title="Permalink to Lua : some basics" rel="bookmark">permalink</a>.		
			</footer><!-- .entry-meta -->
</article><!-- #post-369 -->

						<div id="comments">
	
	
	
									
</div><!-- #comments -->

				
			</div><!-- #content -->
		</div><!-- #primary -->


	</div><!-- #main -->

	<footer id="colophon" role="contentinfo">

			

			<div id="site-generator">

								
				<!--
				<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
				-->

				<a href="http://wordpress.org/">It was Proudly powered by WordPress. ( 2010 - 2014 ) </a>
				
			</div>
	</footer><!-- #colophon -->
</div><!-- #page -->


</body>
</html>